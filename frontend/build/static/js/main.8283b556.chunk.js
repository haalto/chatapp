(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{40:function(e,a,n){e.exports=n(94)},45:function(e,a,n){},46:function(e,a,n){},47:function(e,a,n){},48:function(e,a,n){},75:function(e,a){},94:function(e,a,n){"use strict";n.r(a);var t=n(0),s=n.n(t),c=n(38),r=n.n(c),l=n(2),u=(n(45),function(e){var a=e.users;return s.a.createElement("div",{className:"container"},s.a.createElement("div",null,a.map((function(e){return e?s.a.createElement("p",{className:"chat-user",key:e._id},e):null}))))}),o=(n(46),function(e){var a=e.username,n=e.message,c=e.submitMessage,r=e.handleMessageChange,l=e.users,o=e.messages,m=Object(t.useRef)(null);return Object(t.useEffect)((function(){m.current.scrollIntoView({behavior:"smooth"})}),[o]),s.a.createElement("div",{className:"chat"},s.a.createElement("div",{className:"chat-users"},s.a.createElement("span",{className:"chat-users-header"},"users:"),s.a.createElement(u,{users:l})),s.a.createElement("div",{className:"chat-messages"},o.map((function(e){return e?s.a.createElement("p",{className:"chat-message",key:e.time+e.user},s.a.createElement("strong",null,e.user),": ",e.message):null})),s.a.createElement("div",{ref:m})),s.a.createElement("form",{onSubmit:c,className:"chat-form"},s.a.createElement("strong",null,a,":"),s.a.createElement("input",{className:"chat-input",onChange:r,value:n}),s.a.createElement("button",{className:"chat-button",type:"submit"},"Send")))}),m=(n(47),function(e){var a=e.username,n=e.password,t=e.handleUsernameChange,c=e.handlePasswordChange,r=e.handleSubmit,l=e.handleShowSign;return s.a.createElement("div",{className:"login"},s.a.createElement("div",{className:"login-header"},s.a.createElement("span",{className:"login-header-main"},"hello anonymous"),s.a.createElement("span",{className:"login-header-sub"},"login or ",s.a.createElement("span",{className:"sign-up-link",onClick:l},"sign up"))),s.a.createElement("form",{onSubmit:r,className:"login-form"},s.a.createElement("input",{className:"login-input",value:a,onChange:t,placeholder:"username"}),s.a.createElement("input",{className:"login-input",type:"password",placeholder:"password",value:n,onChange:c}),s.a.createElement("button",{className:"login-button",type:"submit"},"enter")))}),i=(n(48),function(e){var a=e.username,n=e.password,t=e.handleUsernameChange,c=e.handlePasswordChange,r=e.handleSubmit,l=e.handleShowLogin;return s.a.createElement("div",{className:"sign"},s.a.createElement("div",{className:"sign-header"},s.a.createElement("span",{className:"sign-header-main"},"new user"),s.a.createElement("span",{className:"sign-header-sub"},"please sign up below or ",s.a.createElement("span",{className:"sign-up-link",onClick:l},"login"))),s.a.createElement("form",{onSubmit:r,className:"sign-form"},s.a.createElement("input",{className:"sign-input",placeholder:"username",value:a,onChange:t}),s.a.createElement("input",{className:"sign-input",type:"password",placeholder:"password",value:n,onChange:c}),s.a.createElement("button",{className:"sign-button",type:"submit"},"enter")))}),g=n(39),d=n.n(g),h=n(3),p=n.n(h),f="/api/users",b=function(e){return p.a.post(f,e).then((function(e){return e.data}))},E=function(e){return p.a.post("/login",e).then((function(e){return e.data}))},v=function(){var e=Object(t.useState)(""),a=Object(l.a)(e,2),n=a[0],c=a[1],r=Object(t.useState)(""),u=Object(l.a)(r,2),g=u[0],h=u[1],p=Object(t.useState)(""),f=Object(l.a)(p,2),v=f[0],N=f[1],j=Object(t.useState)(""),O=Object(l.a)(j,2),S=O[0],w=O[1],C=Object(t.useState)(""),k=Object(l.a)(C,2),y=k[0],M=k[1],P=Object(t.useState)(""),U=Object(l.a)(P,2),D=U[0],A=U[1],I=Object(t.useState)(""),J=Object(l.a)(I,2),L=J[0],R=J[1],q=Object(t.useState)([""]),x=Object(l.a)(q,2),B=x[0],V=x[1],_=Object(t.useState)([""]),z=Object(l.a)(_,2),F=z[0],G=z[1],H=Object(t.useState)(!0),K=Object(l.a)(H,2),Q=K[0],T=K[1],W=Object(t.useState)(!1),X=Object(l.a)(W,2),Y=X[0],Z=X[1],$=Object(t.useState)(!1),ee=Object(l.a)($,2),ae=ee[0],ne=ee[1],te=Object(t.useRef)(d()("/",{autoConnect:!1})).current;Object(t.useEffect)((function(){g&&(te.io.opts.query={token:g},te.open(),T(!1),ne(!0))}),[g,te]),Object(t.useEffect)((function(){te.on("chat-message",(function(e){V((function(a){return a.concat(e)}))})),te.on("active-users",(function(e){console.log("Active users",e),G(e)}))}),[te]);var se=function(){T(!Q),Z(!Y)};return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",null),Q?s.a.createElement("div",{className:"main"},s.a.createElement(m,{username:v,password:S,handleSubmit:function(e){e.preventDefault(),E({username:v,password:S}).then((function(e){N(""),w(""),c(e.username),h(e.token)})).catch((function(e){console.log(e)}))},handleUsernameChange:function(e){N(e.target.value)},handlePasswordChange:function(e){w(e.target.value)},handleShowSign:se})):"",Y?s.a.createElement("div",{className:"main"},s.a.createElement(i,{handleShowLogin:se,username:y,password:D,handleUsernameChange:function(e){M(e.target.value)},handlePasswordChange:function(e){A(e.target.value)},handleSubmit:function(e){e.preventDefault();var a={username:y,password:D};b(a).then((function(e){return E(a)})).then((function(e){console.log(e),c(e.username),h(e.token),M(""),A(""),Z(!1)})).catch((function(e){return console.log(e)}))}})):"",ae?s.a.createElement("div",{className:"main"},s.a.createElement(o,{username:n,message:L,submitMessage:function(e){e.preventDefault(),L&&(console.log("Sending a new message"),te.emit("new-message",{message:L,user:n}),R(""))},handleMessageChange:function(e){R(e.target.value)},messages:B,users:F})):"",s.a.createElement("div",null)))};r.a.render(s.a.createElement(v,null),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.8283b556.chunk.js.map
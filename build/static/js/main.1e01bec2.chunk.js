(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{40:function(e,a,n){e.exports=n(94)},45:function(e,a,n){},46:function(e,a,n){},47:function(e,a,n){},48:function(e,a,n){},75:function(e,a){},94:function(e,a,n){"use strict";n.r(a);var t=n(0),s=n.n(t),c=n(38),r=n.n(c),l=n(2),o=(n(45),function(e){var a=e.users,n=0;return s.a.createElement("div",{className:"container"},s.a.createElement("div",null,a.map((function(e){return n+=1,e?s.a.createElement("p",{className:"chat-user",key:n},e):null}))))}),u=(n(46),function(e){var a=e.username,n=e.message,c=e.submitMessage,r=e.handleMessageChange,l=e.users,u=e.messages,m=0,i=Object(t.useRef)(null);return Object(t.useEffect)((function(){i.current.scrollIntoView({behavior:"smooth"})}),[u]),s.a.createElement("div",{className:"chat"},s.a.createElement("div",{className:"chat-users"},s.a.createElement("span",{className:"chat-users-header"},"users:"),s.a.createElement(o,{users:l})),s.a.createElement("div",{className:"chat-messages"},u.map((function(e){return m+=1,e?s.a.createElement("p",{className:"chat-message",key:m},e.time," ",s.a.createElement("strong",null,e.username),": ",e.message):null})),s.a.createElement("div",{ref:i})),s.a.createElement("div",{className:"chat-form"},s.a.createElement("form",{onSubmit:c},s.a.createElement("strong",null,a,":"),s.a.createElement("input",{className:"chat-input",onChange:r,value:n}),s.a.createElement("button",{className:"chat-button",type:"submit"},"Send"))))}),m=(n(47),function(e){var a=e.username,n=e.password,t=e.handleUsernameChange,c=e.handlePasswordChange,r=e.handleSubmit,l=e.handleShowSign;return s.a.createElement("div",{className:"login"},s.a.createElement("div",{className:"login-header"},s.a.createElement("span",{className:"login-header-main"},"hello anonymous"),s.a.createElement("span",{className:"login-header-sub"},"login or ",s.a.createElement("span",{className:"sign-up-link",onClick:l},"sign up"))),s.a.createElement("form",{onSubmit:r,className:"login-form"},s.a.createElement("input",{className:"login-input",value:a,onChange:t,placeholder:"username"}),s.a.createElement("input",{className:"login-input",type:"password",placeholder:"password",value:n,onChange:c}),s.a.createElement("button",{className:"login-button",type:"submit"},"enter")))}),i=(n(48),function(e){var a=e.username,n=e.password,t=e.handleUsernameChange,c=e.handlePasswordChange,r=e.handleSubmit,l=e.handleShowLogin;return s.a.createElement("div",{className:"sign"},s.a.createElement("div",{className:"sign-header"},s.a.createElement("span",{className:"sign-header-main"},"new user"),s.a.createElement("span",{className:"sign-header-sub"},"please sign up below or ",s.a.createElement("span",{className:"sign-up-link",onClick:l},"login"))),s.a.createElement("form",{onSubmit:r,className:"sign-form"},s.a.createElement("input",{className:"sign-input",placeholder:"username",value:a,onChange:t}),s.a.createElement("input",{className:"sign-input",type:"password",placeholder:"password",value:n,onChange:c}),s.a.createElement("button",{className:"sign-button",type:"submit"},"enter")))}),h=n(39),g=n.n(h),d=n(3),p=n.n(d),f="http://localhost:3001/api/users",b=function(e){return p.a.post(f,e).then((function(e){return e.data}))},E=function(e){return p.a.post("http://localhost:3001/login",e).then((function(e){return e.data}))},v=function(){var e=Object(t.useState)(""),a=Object(l.a)(e,2),n=a[0],c=a[1],r=Object(t.useState)(""),o=Object(l.a)(r,2),h=o[0],d=o[1],p=Object(t.useState)(""),f=Object(l.a)(p,2),v=f[0],N=f[1],j=Object(t.useState)(""),O=Object(l.a)(j,2),S=O[0],w=O[1],C=Object(t.useState)(""),k=Object(l.a)(C,2),y=k[0],M=k[1],P=Object(t.useState)(""),U=Object(l.a)(P,2),D=U[0],R=U[1],A=Object(t.useState)(""),I=Object(l.a)(A,2),J=I[0],L=I[1],q=Object(t.useState)([""]),x=Object(l.a)(q,2),B=x[0],V=x[1],z=Object(t.useState)([""]),F=Object(l.a)(z,2),G=F[0],H=F[1],K=Object(t.useState)(!0),Q=Object(l.a)(K,2),T=Q[0],W=Q[1],X=Object(t.useState)(!1),Y=Object(l.a)(X,2),Z=Y[0],$=Y[1],_=Object(t.useState)(!1),ee=Object(l.a)(_,2),ae=ee[0],ne=ee[1],te=Object(t.useRef)(g()("http://localhost:3001",{autoConnect:!1})).current;Object(t.useEffect)((function(){h&&(te.io.opts.query={token:h},te.open(),W(!1),ne(!0))}),[h,te]),Object(t.useEffect)((function(){te.on("chat-message",(function(e){console.log("Received message: ".concat(e.message," from ").concat(e.user)),V((function(a){return a.concat(e)}))})),te.on("active-users",(function(e){console.log("Active users",e),H(e)}))}),[te]);var se=function(){W(!T),$(!Z)};return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",null,"navbar"),T?s.a.createElement("div",{className:"main"},s.a.createElement(m,{username:v,password:S,handleSubmit:function(e){e.preventDefault(),E({username:v,password:S}).then((function(e){N(""),w(""),c(e.username),d(e.token)})).catch((function(e){console.log(e)}))},handleUsernameChange:function(e){N(e.target.value)},handlePasswordChange:function(e){w(e.target.value)},handleShowSign:se})):"",Z?s.a.createElement("div",{className:"main"},s.a.createElement(i,{handleShowLogin:se,username:y,password:D,handleUsernameChange:function(e){M(e.target.value)},handlePasswordChange:function(e){R(e.target.value)},handleSubmit:function(e){e.preventDefault();var a={username:y,password:D};b(a).then((function(e){return E(a)})).then((function(e){console.log(e),c(e.username),d(e.token),M(""),R(""),$(!1)})).catch((function(e){return console.log(e)}))}})):"",ae?s.a.createElement("div",{className:"main"},s.a.createElement(u,{username:n,message:J,submitMessage:function(e){e.preventDefault(),J&&(console.log("Sending a new message"),te.emit("new-message",{message:J,user:n}),L(""))},handleMessageChange:function(e){L(e.target.value)},messages:B,users:G})):"",s.a.createElement("div",null,"footer")))};r.a.render(s.a.createElement(v,null),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.1e01bec2.chunk.js.map